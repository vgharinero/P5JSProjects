let map = [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0],
    [0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],
    [0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],
    [0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0],
    [0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0],
    [0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0],
    [0,0,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1],
    [0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0],
]

let path = []

function setup()
{

    createCanvas(map[0].length * 40, map.length * 40)

    let aStar = new AStar({X: 0, Y: 0}, {X: 21, Y: 16}, map)
    let lastNode = aStar.find()
    for(let node = lastNode; node != null; node = node.parent) {
        console.log(node)
        path.push(node)
    }
}   

function draw()
{
    map.forEach((row, i) => {
        row.forEach((pos, j) => {
            fill((pos ? 'black' : 'gray'))
            rect(j * 40, i * 40, 40, 40)
        })
    })    

    path.forEach(node => {
        fill('blue')
        rect(node.X * 40, node.Y * 40, 40, 40)
    })
}

function mouseClicked(event)
{
    /*let X = Math.floor((event.clientX - 520) / 40)
    let Y = Math.floor((event.clientY - 145) / 40)

    map[Y][X] = (map[Y][X]) ? 0 : 1*/
}